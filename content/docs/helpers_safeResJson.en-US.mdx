---
title: safeResJson
path: safeResJson
publishedAt: 2024-03-01
githubLink: https://github.com/PolGubau/pol-ui/tree/main/src/helpers/safeResJson
doc_type: helper
summary: Utility function that safely extracts JSON data from a Response object. It checks if the response status is okay (2xx) and returns the parsed JSON data. Otherwise, it throws an error with the message 'Internal server error!'.

pageLink: https://github.com/PolGubau/pol-ui/tree/main/src/helpers/safeResJson
tags:
  - safeResJson
  - Fetch
  - Error Handling
  - Pol-ui
---

The **safeResJson** function is a utility that safely extracts JSON data from a `Response` object. It checks if the response status is okay (2xx) and returns the parsed JSON data. Otherwise, it throws an error with the message 'Internal server error!'.

## Usage

Import the **safeResJson** function in your project and use it to handle JSON responses from fetch requests:

```tsx
import { safeResJson } from "pol-ui";

// Your code goes here

fetch('https://example.com/api/data')
  .then(safeResJson)
  .then((jsonData) => {
    console.log("JSON Data:", jsonData);
  })
  .catch((error) => {
    console.error("Error:", error.message);
  });
Parameters
res (Response): The Response object from a fetch request.
Return Value
The function returns a Promise that resolves to the parsed JSON data if the response status is okay (2xx). Otherwise, it rejects with an error containing the message 'Internal server error!'.

Example
tsx
Copy code
import { safeResJson } from 'pol-ui';

fetch('https://example.com/api/data')
  .then(safeResJson)
  .then((jsonData) => {
    console.log('JSON Data:', jsonData);
  })
  .catch((error) => {
    console.error('Error:', error.message);
  });

// Output:
// JSON Data: { /* Parsed JSON Data */ }
// or
// Error: Internal server error!
In this example, the safeResJson function is used to handle a fetch request's response, ensuring that JSON data is safely extracted or an error is thrown if the response status is not okay.

Use Cases
Fetch Requests: When working with fetch requests, use safeResJson to handle JSON responses more safely.
Error Handling: Simplifies error handling for fetch requests, providing a consistent way to deal with non-okay responses.
Integrate the safeResJson function into your project to enhance the reliability of handling JSON responses from fetch requests.
```
